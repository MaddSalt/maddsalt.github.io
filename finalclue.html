<!DOCTYPE html>
<html lang="en">
<style>
    * {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
  margin: 0;
  font-family: 'Unica One', sans-serif;
  background: #111;
}

.container {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 5rem;
}

.heading {
  color: #eee;
  font-size: 5rem;
  font-weight: 300;
  text-transform: uppercase;
}
</style>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Clue | Key to the Treat</title>
</head>
<body>
    <div class="container">
        <h1 class="heading" data-target-resolver></h1>
      </div>

      <script>
        const resolver = {
      resolve: function resolve(options, callback) {
        // The string to resolve
        const resolveString = options.resolveString || options.element.getAttribute('data-target-resolver');
        const combinedOptions = Object.assign({}, options, {resolveString: resolveString});
        
        function getRandomInteger(min, max) {
          return Math.floor(Math.random() * (max - min + 1)) + min;
        };
        
        function randomCharacter(characters) {
          return characters[getRandomInteger(0, characters.length - 1)];
        };
        
        function doRandomiserEffect(options, callback) {
          const characters = options.characters;
          const timeout = options.timeout;
          const element = options.element;
          const partialString = options.partialString;
    
          let iterations = options.iterations;
    
          setTimeout(() => {
            if (iterations >= 0) {
              const nextOptions = Object.assign({}, options, {iterations: iterations - 1});
    
              // Ensures partialString without the random character as the final state.
              if (iterations === 0) {
                element.textContent = partialString;
              } else {
                // Replaces the last character of partialString with a random character
                element.textContent = partialString.substring(0, partialString.length - 1) + randomCharacter(characters);
              }
    
              doRandomiserEffect(nextOptions, callback)
            } else if (typeof callback === "function") {
              callback(); 
            }
          }, options.timeout);
        };
        
        function doResolverEffect(options, callback) {
          const resolveString = options.resolveString;
          const characters = options.characters;
          const offset = options.offset;
          const partialString = resolveString.substring(0, offset);
          const combinedOptions = Object.assign({}, options, {partialString: partialString});
    
          doRandomiserEffect(combinedOptions, () => {
            const nextOptions = Object.assign({}, options, {offset: offset + 1});
    
            if (offset <= resolveString.length) {
              doResolverEffect(nextOptions, callback);
            } else if (typeof callback === "function") {
              callback();
            }
          });
        };
    
        doResolverEffect(combinedOptions, callback);
      } 
    }
    
    
    const strings = [
      'So you have found the final clue...',
      'Read closely in order for the hint to help you...',
      'I am soft and creamy, the key to a holiday treat. You will not find me in the cookie jar or under the seat. I am used to make the pies and cakes, oh so sweet. But you will have to search the kitchen to find me complete. For I am in a hidden place but when you find me you will see my golden face.'
    ];
    
    let counter = 0;
    
    const options = {
      // Initial position
      offset: 0,
      // Timeout between each random character
      timeout: 5,
      // Number of random characters to show
      iterations: 10,
      // Random characters to pick from
      characters: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'x', 'y', 'x', '#', '%', '&', '-', '+', '_', '?', '/', '\\', '='],
      // String to resolve
      resolveString: strings[counter],
      // The element
      element: document.querySelector('[data-target-resolver]')
    }
    
    // Callback function when resolve completes
    function callback() {
      setTimeout(() => {
        counter ++;
        
        if (counter >= strings.length) {
          counter = 0;
          if(terminateConditionFullfiled) return; 
        }
        
        let nextOptions = Object.assign({}, options, {resolveString: strings[counter]});
        resolver.resolve(nextOptions, callback);
      }, 1000);
    }
    
    resolver.resolve(options, callback);
    </script>
</body>
</html>